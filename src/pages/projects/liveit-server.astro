---
import Layout from "~/layouts/PageLayout.astro";
import { Icon } from "astro-icon/components";
import Header from "~/components/widgets/Header.astro";

const metadata = {
  title: "LIVEIT Platform | Kev Portfolio",
  description:
    "LIVEIT is a faith-based habit platform: Flutter app + NestJS/Prisma backend + SvelteKit CMS, featuring Habit Tracker, Zoe Points gamification, devotionals, and a Medium-like articles system with Appwrite integration.",
};
---

<Layout metadata={metadata}>
  <Fragment slot="announcement"></Fragment>
  <Fragment slot="header">
    <Header
      links={[
        { text: "Home", href: "/" },
        { text: "About", href: "/#about" },
        { text: "Resume", href: "/#resume" },
        { text: "Portfolio", href: "/#portfolio" },
        { text: "Github", href: "https://github.com/kevinalexa20" },
      ]}
      actions={[{ text: "Hire me", href: "#" }]}
      isSticky
      showToggleTheme
    />
  </Fragment>

  <div class="mx-auto max-w-6xl px-4 py-16 md:px-8">
    <div class="mb-8">
      <a
        href="/#portfolio"
        class="inline-flex items-center text-blue-600 hover:text-blue-800 transition-colors">
        <Icon name="tabler:arrow-left" class="w-5 h-5 mr-2" /> Back to Portfolio
      </a>
    </div>

    <div class="mb-12">
      <h1
        class="text-3xl md:text-5xl font-bold text-gray-900 dark:text-white mb-4">
        LIVEIT: Habit Platform for Spiritual Growth
      </h1>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mt-8">
        <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg">
          <h3 class="font-semibold text-gray-900 dark:text-white mb-2">
            Project
          </h3>
          <p class="text-gray-600 dark:text-gray-300">LIVEIT Platform (Monorepo)</p>
        </div>
        <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg">
          <h3 class="font-semibold text-gray-900 dark:text-white mb-2">
            My Role
          </h3>
          <p class="text-gray-600 dark:text-gray-300">Backend + Platform Engineer</p>
        </div>
        <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg">
          <h3 class="font-semibold text-gray-900 dark:text-white mb-2">
            Duration
          </h3>
          <p class="text-gray-600 dark:text-gray-300">2025 - Present</p>
        </div>
        <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg">
          <h3 class="font-semibold text-gray-900 dark:text-white mb-2">
            Tech Stack
          </h3>
          <p class="text-gray-600 dark:text-gray-300">
            Flutter (Bloc + Dio), NestJS 11, Prisma 6, PostgreSQL, SvelteKit,
            Appwrite (Auth/Storage/Tables), Redis (optional), Swagger, Docker
          </p>
        </div>
        <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg">
          <h3 class="font-semibold text-gray-900 dark:text-white mb-2">
            Platform Scope
          </h3>
          <p class="text-gray-600 dark:text-gray-300">
            Mobile App + Backend API + Internal CMS for content and user
            progression
          </p>
        </div>
      </div>

      <div class="flex flex-wrap gap-4 mt-8">
        <a
          href="#"
          class="inline-flex items-center px-6 py-3 bg-gray-800 text-white rounded-lg opacity-70 cursor-not-allowed">
          <Icon name="tabler:brand-github" class="w-5 h-5 mr-2" /> Private Repo
        </a>
      </div>
    </div>

    <div class="mb-12">
      <img
        src="/selfie-plus-app.png"
        alt="LIVEIT Platform Architecture"
        class="w-full h-auto object-contain rounded-lg shadow-lg"
      />
    </div>

    <div class="prose prose-lg max-w-none dark:prose-invert">
      <section class="mb-12">
        <h2 class="text-2xl md:text-3xl font-bold mb-6">Project Overview</h2>
        <p>
          LIVEIT is a faith-based platform that helps young Christians build
          real spiritual habits through an action-oriented habit tracker,
          meaningful gamification (Zoe Points, streaks, badges), and curated
          inspirational content. The product is built as a monorepo with a
          Flutter mobile client, a NestJS backend as the source of truth, and a
          SvelteKit CMS used internally to manage content.
        </p>
      </section>

      <section class="mb-12">
        <h2 class="text-2xl md:text-3xl font-bold mb-6">Platform Architecture</h2>
        <ul class="list-disc pl-6 space-y-2">
          <li>
            Clients: Flutter app (consumer) and SvelteKit CMS (internal admin)
          </li>
          <li>
            Backend: NestJS API as the single entry point and business logic
            layer
          </li>
          <li>
            Data: PostgreSQL via Prisma for core domain data; Appwrite for
            auth/storage/tables (proxy + hybrid strategy)
          </li>
        </ul>
      </section>

      <section class="mb-12">
        <h2 class="text-2xl md:text-3xl font-bold mb-6">Data Flow</h2>
        <pre><code>Flutter App  ----\
                 \\--> NestJS API --> PostgreSQL (Prisma)
SvelteKit CMS ----/                 \
                                   --> Appwrite (Auth/Files/Tables)</code></pre>
      </section>

      <section class="mb-12">
        <h2 class="text-2xl md:text-3xl font-bold mb-6">Repositories</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          <div class="bg-gray-50 dark:bg-gray-800 p-6 rounded-lg">
            <h3 class="text-xl font-semibold mb-3">
              liveit-server (Backend API)
            </h3>
            <ul class="list-disc pl-6 space-y-2">
              <li>
                NestJS 11 + Prisma/PostgreSQL as source of truth
              </li>
              <li>
                Appwrite proxy integration for auth/storage/tables
              </li>
              <li>
                Swagger docs, rate limiting, Docker deployment path
              </li>
            </ul>
          </div>
          <div class="bg-gray-50 dark:bg-gray-800 p-6 rounded-lg">
            <h3 class="text-xl font-semibold mb-3">liveit-flutter (Mobile App)</h3>
            <ul class="list-disc pl-6 space-y-2">
              <li>
                Flutter + Bloc for state management, Dio for HTTP
              </li>
              <li>
                Consumes backend APIs for auth, habits, gamification, content
              </li>
              <li>
                Built for young adult audience (18-35) with habit-first UX
              </li>
            </ul>
          </div>
          <div class="bg-gray-50 dark:bg-gray-800 p-6 rounded-lg">
            <h3 class="text-xl font-semibold mb-3">liveit-web (CMS Admin)</h3>
            <ul class="list-disc pl-6 space-y-2">
              <li>
                SvelteKit CMS for articles/content workflows
              </li>
              <li>
                Uses backend API with admin gating (JWT + allowlist)
              </li>
              <li>
                Supports Medium-like content model and asset uploads
              </li>
            </ul>
          </div>
        </div>
      </section>

      <section class="mb-12">
        <h2 class="text-2xl md:text-3xl font-bold mb-6">Core Capabilities</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          <div class="bg-gray-50 dark:bg-gray-800 p-6 rounded-lg">
            <h3 class="text-xl font-semibold mb-3">Auth & Profiles</h3>
            <ul class="list-disc pl-6 space-y-2">
              <li>Appwrite-proxy auth (email/password + OAuth) + JWT</li>
              <li>Email-claim flow with TTL and profile privacy controls</li>
              <li>Profile summary endpoints with habit + gamification aggregates</li>
            </ul>
          </div>

          <div class="bg-gray-50 dark:bg-gray-800 p-6 rounded-lg">
            <h3 class="text-xl font-semibold mb-3">Habit Tracker</h3>
            <ul class="list-disc pl-6 space-y-2">
              <li>Idempotent check-in/undo; archive without losing history</li>
              <li>Timezone-aware day boundary (requires <code>profiles.timezone</code>)</li>
              <li>Custom habits + reporting + moderation hooks</li>
              <li>Phase 2A scheduling: frequency/repeat period + ordering + visuals</li>
            </ul>
          </div>

          <div class="bg-gray-50 dark:bg-gray-800 p-6 rounded-lg">
            <h3 class="text-xl font-semibold mb-3">Gamification</h3>
            <ul class="list-disc pl-6 space-y-2">
              <li>Zoe Points awards: check-in, all-done, streak milestones</li>
              <li>Badges/achievements with reflection prompts + level system</li>
              <li>Points history audit log with hybrid storage strategy</li>
            </ul>
          </div>

          <div class="bg-gray-50 dark:bg-gray-800 p-6 rounded-lg">
            <h3 class="text-xl font-semibold mb-3">Devotionals</h3>
            <ul class="list-disc pl-6 space-y-2">
              <li>Daily devotional delivery via Appwrite Tables facade</li>
              <li>Like/unlike, view count, reading time, and habit integration</li>
              <li>Designed for curation-first, low-conflict consumption</li>
            </ul>
          </div>

          <div class="bg-gray-50 dark:bg-gray-800 p-6 rounded-lg">
            <h3 class="text-xl font-semibold mb-3">Articles CMS</h3>
            <ul class="list-disc pl-6 space-y-2">
              <li>Medium-like content: ProseMirror JSON + derived word/read time</li>
              <li>Draft/publish/unpublish lifecycle + public slug endpoints</li>
              <li>Asset uploads (image/video) with size/MIME checks + admin gating</li>
            </ul>
          </div>
        </div>
      </section>

      <section class="mb-12">
        <h2 class="text-2xl md:text-3xl font-bold mb-6">Current Status</h2>
        <ul class="list-disc pl-6 space-y-2">
          <li>
            Implemented: Auth, Profiles, Habit Tracker, Gamification, Devotionals,
            Articles CMS
          </li>
          <li>
            In progress / planned: push notifications (reminders) and content
            seeding workflows
          </li>
        </ul>
      </section>

      <section class="mb-12">
        <h2 class="text-2xl md:text-3xl font-bold mb-6">
          Reliability & Operations
        </h2>
        <ul class="list-disc pl-6 space-y-2">
          <li>API docs: Swagger UI at <code>/api</code> with bearer auth</li>
          <li>Global rate limiting via <code>@nestjs/throttler</code> with per-route overrides</li>
          <li>Configurable cache layer: Redis or in-memory (<code>CACHE_DRIVER</code>)</li>
          <li>Structured JSON logs (nestjs-pino) with requestId propagation</li>
          <li>Dockerized deployment path + Prisma migrations/seed scripts</li>
        </ul>
      </section>

      <section class="mb-12">
        <h2 class="text-2xl md:text-3xl font-bold mb-6">Deployment (DigitalOcean App Platform)</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
          <div class="bg-gray-50 dark:bg-gray-800 p-6 rounded-lg">
            <h4 class="font-semibold mb-2">Service Setup</h4>
            <ul class="list-disc pl-6 space-y-2">
              <li>App Platform Web Service linked to repository</li>
              <li>Build command: <code>npm ci && npm run build</code></li>
              <li>Run command: <code>npm run start:prod</code> (App Platform sets <code>PORT</code>)</li>
              <li>Health check path: <code>/</code> (simple hello route)</li>
              <li>Scaling: 1 container to start; enable autoscale later</li>
            </ul>
          </div>
          <div class="bg-gray-50 dark:bg-gray-800 p-6 rounded-lg">
            <h4 class="font-semibold mb-2">Environment</h4>
            <ul class="list-disc pl-6 space-y-2">
              <li><code>NODE_ENV=production</code>, <code>JWT_KEY</code></li>
              <li><code>DATABASE_URL</code> (attach DO Managed PostgreSQL)</li>
              <li>Cache: <code>CACHE_DRIVER</code> (memory/redis) + <code>REDIS_HOST</code>/<code>REDIS_PORT</code> when enabled</li>
              <li><code>APP_URL</code>, <code>FRONTEND_URL</code></li>
              <li><code>APPWRITE_ENDPOINT</code>, <code>APPWRITE_PROJECT_ID</code>, <code>APPWRITE_API_KEY</code></li>
              <li>Appwrite IDs: <code>APPWRITE_DB_ID</code>, <code>APPWRITE_*_COLLECTION_ID</code>, <code>APPWRITE_*_BUCKET_ID</code></li>
              <li>CMS admin gating: <code>CMS_ADMIN_EMAILS</code></li>
              <li>Logging: <code>LOG_LEVEL</code>, <code>PRISMA_SLOW_QUERY_THRESHOLD_MS</code></li>
            </ul>
          </div>
        </div>
        <ul class="list-disc pl-6 space-y-2 mt-4">
          <li>Connect repo → select main branch → set commands and env vars</li>
          <li>Attach Managed PostgreSQL; App Platform injects <code>DATABASE_URL</code></li>
          <li>First deploy: run <code>npm run migrate:deploy</code> (manually or pre-release step)</li>
          <li>Zero-downtime updates via rolling deploy; view logs in App Platform UI</li>
        </ul>
      </section>

      <section class="mb-12">
        <h2 class="text-2xl md:text-3xl font-bold mb-6">
          Ownership & Outcomes
        </h2>
        <ul class="list-disc pl-6 space-y-2">
          <li>
            Shipped platform foundations across Auth, Profiles, Habit Tracker,
            Gamification, Devotionals, and Articles
          </li>
          <li>
            Built secure-by-default patterns: guards, DTO validation, and per-route throttling
          </li>
          <li>
            Established production ops baseline: Swagger docs, JSON logs + requestId,
            and a Redis-to-memory cache fallback
          </li>
          <li>Enabled internal content workflows via a dedicated CMS + admin gating</li>
        </ul>
      </section>
    </div>
  </div>
</Layout>
