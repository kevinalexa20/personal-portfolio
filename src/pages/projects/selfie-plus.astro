---
import Layout from "~/layouts/PageLayout.astro";
import { Icon } from "astro-icon/components";
import Header from "~/components/widgets/Header.astro";

const metadata = {
  title: "Selfie Plus - Membership Mobile App | Kev Portfolio",
  description:
    "Membership + loyalty app for Selfie Time: auth, points, vouchers, transactions, queue monitoring, content feed, and Instagram Stories sharing. Built with React Native 0.79.6 (React 19), TanStack Query, Redux Toolkit, NativeWind, Firebase, and Notifee.",
};
---

<Layout metadata={metadata}>
  <Fragment slot="announcement"></Fragment>
  <Fragment slot="header">
    <Header
      links={[
        { text: "Home", href: "/" },
        { text: "About", href: "/#about" },
        { text: "Resume", href: "/#resume" },
        { text: "Portfolio", href: "/#portfolio" },
        // { text: 'Blog', href: '#blog' },
        { text: "Github", href: "https://github.com/kevinalexa20" },
      ]}
      actions={[
        {
          text: "Hire me",
          href: "/contact",
        },
      ]}
      isSticky
      showToggleTheme
    />
  </Fragment>

  <div class="mx-auto max-w-6xl px-4 py-16 md:px-8">
    <!-- Back Button -->
    <div class="mb-8">
      <a
        href="/#portfolio"
        class="inline-flex items-center text-blue-600 hover:text-blue-800 transition-colors">
        <Icon name="tabler:arrow-left" class="w-5 h-5 mr-2" />
        Back to Portfolio
      </a>
    </div>

    <!-- Project Header -->
    <div class="mb-12">
      <h1
        class="text-3xl md:text-5xl font-bold text-gray-900 dark:text-white mb-4">
        Selfie Plus: Loyalty Program Mobile App
      </h1>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mt-8">
        <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg">
          <h3 class="font-semibold text-gray-900 dark:text-white mb-2">
            Client
          </h3>
          <p class="text-gray-600 dark:text-gray-300">PT Intinya Technologi</p>
        </div>
        <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg">
          <h3 class="font-semibold text-gray-900 dark:text-white mb-2">
            My Role
          </h3>
          <p class="text-gray-600 dark:text-gray-300">
            Mobile App Owner (React Native)
          </p>
        </div>
        <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg">
          <h3 class="font-semibold text-gray-900 dark:text-white mb-2">
            Duration
          </h3>
          <p class="text-gray-600 dark:text-gray-300">July 2025 - Present</p>
        </div>
        <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg">
          <h3 class="font-semibold text-gray-900 dark:text-white mb-2">
            Tech Stack
          </h3>
          <p class="text-gray-600 dark:text-gray-300">
            React Native 0.79.6 (React 19), TypeScript, TanStack Query v5,
            Redux Toolkit + Persist, NativeWind, Firebase (FCM + Crashlytics),
            Notifee
          </p>
        </div>
        <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg">
          <h3 class="font-semibold text-gray-900 dark:text-white mb-2">
            Key Features
          </h3>
          <p class="text-gray-600 dark:text-gray-300">
            Auth + onboarding, points wallet, voucher marketplace + QR redemption,
            transaction gallery (download + share), queue monitoring, push + local
            notifications, feeds (news/IG/blog/YT), product catalog
          </p>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="flex flex-wrap gap-4 mt-8">
        <a
          href="#"
          target="_blank"
          class="inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
          <Icon name="tabler:brand-google-play" class="w-5 h-5 mr-2" />
          Google Play Store
        </a>
        <a
          href="#"
          target="_blank"
          class="inline-flex items-center px-6 py-3 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors">
          <Icon name="tabler:brand-apple" class="w-5 h-5 mr-2" />
          App Store
        </a>
      </div>
    </div>

    <!-- Project Image -->
    <div class="mb-12">
      <img
        src="https://file.notion.so/f/f/5d7fdf83-5e4e-4a86-93ad-6ab8a7663dbf/ce2dfc37-3283-48ec-90a5-c542a08de8d9/image.png?table=block&id=2897b439-6e74-8003-b1d5-fbe8bf3beaa7&spaceId=5d7fdf83-5e4e-4a86-93ad-6ab8a7663dbf&expirationTimestamp=1760184000000&signature=cKp4vW3uLxFBi6-MPt5EqG2G1lDxW5KjRLxLbFx_594&downloadName=image.png"
        alt="Selfie Plus App Screenshot"
        class="w-full h-auto object-contain rounded-lg shadow-lg"
      />
    </div>

    <!-- Content Sections -->
    <div class="prose prose-lg max-w-none dark:prose-invert">
      <!-- Project Overview -->
      <section class="mb-12">
        <h2 class="text-2xl md:text-3xl font-bold mb-6">Project Overview</h2>
        <p>
          Selfie Plus is a membership and loyalty mobile app for Selfie Time.
          It connects real-world outlet activity (transactions, queueing, photo
          delivery) with loyalty mechanics (points and vouchers) and engagement
          loops (feeds, reminders, and limited-time mini games).
        </p>
        <p>
          The app is built with React Native 0.79.6 + React 19 and ships to both
          Android and iOS. Data fetching uses TanStack Query (v5) on top of an
          Axios client with auth handling; global app state uses Redux Toolkit
          with persisted user session.
        </p>
        <p>
          At PT Intinya Technologi, I own the Selfie Time mobile application end
          to end: product delivery, architecture decisions, release readiness,
          and critical feature implementation.
        </p>
      </section>

      <section class="mb-12">
        <h2 class="text-2xl md:text-3xl font-bold mb-6">
          Business Flows (End-to-End)
        </h2>
        <ul class="list-disc pl-6 space-y-2">
          <li>
            Authentication & onboarding: email/password login, social login
            (Google; Apple on iOS; Facebook flow exists), OTP/email verification,
            then profile completion gating (e.g., DOB) before entering the main
            app.
          </li>
          <li>
            Loyalty wallet: users have a points balance; balance refresh is
            integrated into user/profile workflows.
          </li>
          <li>
            Voucher marketplace: browse redeemable vouchers (infinite list), view
            detail, and redeem with points; users then manage "My Vouchers" and
            redeem in-store using QR.
          </li>
          <li>
            Transactions: transaction history and detail, including paid items,
            status, and a photo/video gallery delivered from sessions.
          </li>
          <li>
            Queueing: users with active sessions receive live queue status
            polling; the app surfaces an always-on queue monitor when your turn
            is close.
          </li>
          <li>
            Engagement: news feed, Instagram feed, blog, YouTube viewer, plus a
            seasonal mini-game (THR Catcher) that can grant bonus points with a
            server-side daily claim limit.
          </li>
        </ul>
      </section>

      <!-- Key Features -->
      <section class="mb-12">
        <h2 class="text-2xl md:text-3xl font-bold mb-6">Key Features</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
          <div class="bg-gray-50 dark:bg-gray-800 p-6 rounded-lg">
            <h3 class="text-xl font-semibold mb-4">Vouchers + QR Redemption</h3>
            <p>
              Users can redeem vouchers with points, then present a QR code in
              outlet for redemption. Voucher detail supports rules and
              restrictions (valid dates, outlet/product/day constraints) and
              gracefully handles expired/used states.
            </p>
          </div>
          <div class="bg-gray-50 dark:bg-gray-800 p-6 rounded-lg">
            <h3 class="text-xl font-semibold mb-4">Transaction Gallery</h3>
            <p>
              Transaction detail aggregates session metadata and gallery items
              (photos + videos). Users can preview, download to device, and open
              a web-based "unlock photos" flow when needed.
            </p>
          </div>
          <div class="bg-gray-50 dark:bg-gray-800 p-6 rounded-lg">
            <h3 class="text-xl font-semibold mb-4">Queue Monitoring</h3>
            <p>
              The app polls queue status (per-user, per-outlet session) and shows
              a floating, dismissible monitor when the turn is near; it triggers
              haptics/vibration when the order becomes 1.
            </p>
          </div>
          <div class="bg-gray-50 dark:bg-gray-800 p-6 rounded-lg">
            <h3 class="text-xl font-semibold mb-4">Share to Instagram Stories</h3>
            <p>
              From the gallery, users can share an image to Instagram Stories.
              The flow downloads the remote image, composes a branded 1080x1920
              story image with a frame, then launches Instagram Stories sharing
              with platform-specific handling and cleanup.
            </p>
          </div>

          <div class="bg-gray-50 dark:bg-gray-800 p-6 rounded-lg">
            <h3 class="text-xl font-semibold mb-4">THR Catcher Mini-Game</h3>
            <p>
              A seasonal, gamified campaign: users play a 3-level catching game
              and can claim a points reward upon completion. The claim flow is
              enforced server-side (max 1 reward per day) while the client
              handles the game loop, UI, and reward submission.
            </p>
          </div>

          <div class="bg-gray-50 dark:bg-gray-800 p-6 rounded-lg">
            <h3 class="text-xl font-semibold mb-4">Content Feeds</h3>
            <p>
              In-app content distribution surfaces updates via news feed,
              Instagram feed, blog detail, and YouTube viewer screens to keep
              members engaged between visits.
            </p>
          </div>
        </div>
      </section>

      <section class="mb-12">
        <h2 class="text-2xl md:text-3xl font-bold mb-6">
          Architecture (How It Works)
        </h2>
        <p>
          The app uses React Navigation (native stack + bottom tabs) with deep
          linking (custom scheme) for notifications and marketing links. Most
          server communication goes through a single Axios client that injects a
          bearer token and triggers a safe logout on 401/Unauthenticated.
        </p>
        <ul class="list-disc pl-6 space-y-2">
          <li>
            State: Redux Toolkit for app/global state; Redux Persist keeps the
            authenticated user session across restarts.
          </li>
          <li>
            Data: TanStack Query v5 for queries, infinite lists, and mutations;
            sensible defaults (retry + caching) configured at app root.
          </li>
          <li>
            Networking: Axios client under `/api` with auth header injection and
            centralized 401 handling.
          </li>
          <li>
            UI: NativeWind (Tailwind for React Native) plus reusable UI
            primitives (buttons, inputs, modals) and custom tab bar.
          </li>
          <li>
            Reliability: Error boundary + global error handler with Firebase
            Crashlytics (production) for crash capture.
          </li>
        </ul>
      </section>

      <section class="mb-12">
        <h2 class="text-2xl md:text-3xl font-bold mb-6">
          Notifications & Deep Linking
        </h2>
        <ul class="list-disc pl-6 space-y-2">
          <li>
            Push notifications: Firebase Cloud Messaging; foreground and
            background handlers display notifications via Notifee.
          </li>
          <li>
            Local notifications: scheduled voucher expiry reminders (1, 7, 14
            days before expiration) using timestamp triggers.
          </li>
          <li>
            Deep links: notification payloads can include a `link` field; when
            pressed, the app opens the deep link and routes the user to the
            correct screen.
          </li>
        </ul>
      </section>

      <!-- Technical Challenges -->
      <section class="mb-12">
        <h2 class="text-2xl md:text-3xl font-bold mb-6">
          Technical Challenges & Solutions
        </h2>

        <div class="space-y-8">
          <div>
            <h3 class="text-xl font-semibold mb-3">
              React Native Upgrade + 16KB Page Size Compliance
            </h3>
            <p>
              Migrated the app across multiple major React Native versions to
              React Native 0.79.6 + React 19, modernizing Android build tooling
              for upcoming Play Store 16KB page size requirements.
            </p>
            <ul class="list-disc pl-6 mt-2">
              <li>
                Android: AGP 8.6, JDK 17, SDK 35, NDK 27.x, Hermes
              </li>
              <li>
                Enabled New Architecture (TurboModules + Fabric) and Bridgeless
                mode
              </li>
              <li>Implementing support for Android 16KB page sizes</li>
              <li>
                Used patch-package to keep critical third-party libraries working
                during upgrades
              </li>
            </ul>
          </div>

          <div>
            <h3 class="text-xl font-semibold mb-3">
              Instagram Stories Sharing (Anti-Crop + Cross-Platform)
            </h3>
            <p>
              Built a deterministic share pipeline for Instagram Stories that is
              reliable on both platforms.
            </p>
            <ul class="list-disc pl-6 mt-2">
              <li>
                Downloads remote images to local cache first for stable
                processing
              </li>
              <li>
                Composes a branded story image at 1080x1920 using ViewShot and
                tuned transforms (scale/rotate) to avoid unwanted cropping
              </li>
              <li>
                Uses Instagram Stories share integration with platform-specific
                behaviors (Android FileProvider/content URIs; iOS scheme checks)
              </li>
              <li>
                Cleans up temporary files after share to avoid cache bloat
              </li>
            </ul>
          </div>

          <div>
            <h3 class="text-xl font-semibold mb-3">Performance Optimization</h3>
            <p>Enhanced app performance through:</p>
            <ul class="list-disc pl-6 mt-2">
              <li>
                Efficient image loading/caching and thumbnail handling for media
                heavy screens
              </li>
              <li>
                Stabilizing navigation and background handlers to reduce UI jank
              </li>
              <li>
                Using TanStack Query caching + infinite queries for long lists
                (vouchers, transactions)
              </li>
              <li>
                Avoiding repeated side effects with explicit "run once" guards
                for profile fetch and push token registration
              </li>
            </ul>
          </div>

          <div>
            <h3 class="text-xl font-semibold mb-3">
              Type Safety Implementation
            </h3>
            <p>Improved code quality and maintainability by:</p>
            <ul class="list-disc pl-6 mt-2">
              <li>Migrating key components from JavaScript to TypeScript</li>
              <li>
                Implementing comprehensive type definitions for API responses
                and state management
              </li>
              <li>
                Creating reusable typed custom hooks for common functionality
              </li>
              <li>
                Establishing type-safe patterns for component props and state
                management
              </li>
            </ul>
          </div>
        </div>
      </section>

      <!-- Results & Impact -->
      <section class="mb-12">
        <h2 class="text-2xl md:text-3xl font-bold mb-6">Results & Impact</h2>
        <p>
          The Selfie Plus app has delivered significant value to both users and
          the business:
        </p>
        <ul class="list-disc pl-6 mt-4">
          <li>
            Modernized React Native stack (0.79.6 + React 19) and Android build
            toolchain to meet upcoming platform requirements
          </li>
          <li>
            Shipped media-heavy transaction gallery flows (images + videos) with
            download and sharing capabilities
          </li>
          <li>
            Improved engagement loops with notifications, feed content, and
            queue monitoring
          </li>
          <li>
            Increased maintainability via typed hooks, centralized networking,
            and consistent state/data boundaries
          </li>
          <li>
            Created a platform-ready application compliant with the latest
            Android and iOS requirements
          </li>
        </ul>
      </section>

      <!-- Key Contributions -->
      <section>
        <h2 class="text-2xl md:text-3xl font-bold mb-6">
          My Key Contributions
        </h2>
        <ul class="list-disc pl-6">
          <li>
            Delivered the end-to-end Instagram Stories sharing pipeline
            (download -> compose -> share -> cleanup)
          </li>
          <li>
            Led major framework/tooling upgrades (React Native 0.79.6, New
            Architecture, Bridgeless mode, Android build modernization)
          </li>
          <li>
            Implemented 16KB page size readiness work and coordinated related
            dependency migrations
          </li>
          <li>
            Migrated/typed key flows and hooks to improve type safety and reduce
            runtime errors
          </li>
          <li>
            Improved reliability of push + local notifications (FCM + Notifee)
            including deep link handling
          </li>
          <li>
            Created reusable components and custom hooks for common
            functionality
          </li>
          <li>
            Implemented comprehensive error handling and logging for development
            and production environments
          </li>
        </ul>
      </section>
    </div>
  </div>
</Layout>

